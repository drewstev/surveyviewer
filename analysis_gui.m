function anaopt = analysis_gui(varargin)

if ~isempty(varargin)
    anaopt=varargin{1};
else
    anaopt.ana_type=1;
    anaopt.ana_vc_unc=0.05;
    anaopt.ana_shore_ref=2;
end


hf2 = figure('units','normalized','position',[0.332 0.688 0.154 0.232],...
    'menubar','none','name','analysis_gui',...
    'numbertitle','off','color',[0.94 0.94 0.94]);

%analysis type
uicontrol(hf2,'style','text','units','normalized','position',...
    [0.0506 0.738 0.487 0.118],'string','Change Interval',...
    'backgroundcolor',[0.94 0.94 0.94]);
gd2.popup = uicontrol(hf2,'style','popupmenu','units','normalized',....
    'position',[0.56 0.795 0.389 0.0673],....
    'string',{'Cumulative';'Instantaneous'},...
    'backgroundcolor',[1 1 1],...
    'value',anaopt.ana_type);

%vertical uncertainty
uicontrol(hf2,'style','text','units','normalized',...
    'position',[0.0506 0.609 0.487 0.118],...
    'string','Vertical Uncertainty (m)',...
    'backgroundcolor',[0.94 0.94 0.94]);
gd2.vu_edit = uicontrol(hf2,'style','edit','units','normalized',...
    'position',[0.563 0.62 0.386 0.101],...
    'string',sprintf('%0.3f',anaopt.ana_vc_unc),...
    'backgroundcolor',[1 1 1]);

%shoreline elevation
uicontrol(hf2,'style','text','units','normalized',...
    'position',[0.0506 0.428 0.487 0.118],...
    'string','Shoreline Elevation (m)',...
    'backgroundcolor',[0.94 0.94 0.94]);
gd2.shore_edit = uicontrol(hf2,'style','edit','units','normalized',...
    'position',[0.563 0.455 0.386 0.101],...
    'string',sprintf('%0.2f',anaopt.ana_shore_ref),...
    'backgroundcolor',[1 1 1]);

uicontrol(hf2,'style','pushbutton','units','normalized',...
    'position',[0.709 0.037 0.241 0.118],'string','OK',...
    'backgroundcolor',[0.94 0.94 0.94],...
    'callback',@go_analysis_gui);
uicontrol(hf2,'style','pushbutton','units','normalized',...
    'position',[0.392 0.037 0.241 0.118],'string','Cancel',...
    'backgroundcolor',[0.94 0.94 0.94]);


gd2.anaopt=anaopt;
guidata(hf2,gd2)
uiwait


gd2=guidata(hf2);
anaopt=gd2.anaopt;
close(hf2);

%%%%----------------------------------------------------
function go_analysis_gui(hf2,evnt) %#ok
gd2=guidata(hf2);

gd2.anaopt.ana_type=get(gd2.popup,'value');
gd2.anaopt.ana_vc_unc=str2double(get(gd2.vu_edit,'string'));
gd2.anaopt.ana_shore_ref=str2double(get(gd2.shore_edit,'string'));
guidata(hf2,gd2)
uiresume;